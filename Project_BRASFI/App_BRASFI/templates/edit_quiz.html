{% extends "layout.html" %}
{% load static %}

{% block title %}
    Editar Quiz | BRASFI
{% endblock %}

{% block body %}
<div class="container mt-4">
    <h2>Editar Quiz: {{ quiz.title }}</h2>

    <form method="post">
        {% csrf_token %}
        <div class="mb-3">
            <label for="title" class="form-label">Título</label>
            <input type="text" class="form-control" name="title" value="{{ quiz.title }}" required>
        </div>

        <div class="mb-3">
            <label for="description" class="form-label">Descrição</label>
            <textarea name="description" class="form-control" rows="3">{{ quiz.description }}</textarea>
        </div>

        <div class="mb-3">
            <label for="time_per_question" class="form-label">Tempo por pergunta (segundos)</label>
            <input type="number" class="form-control" name="time_per_question" value="{{ quiz.time_per_question }}">
        </div>

        <hr>

        <h4>Perguntas</h4>

        {% for question in questions %}
            <div class="mb-3">
                <label class="form-label">Pergunta {{ forloop.counter }}</label>
                <input type="text" class="form-control" name="question_{{ question.id }}" value="{{ question.text }}" required>

                <div class="mt-2">
                    <strong>Alternativas:</strong>
                    {% for choice in question.choices.all %}
                        <div class="input-group mb-1">
                            <input type="text" class="form-control" name="choice_{{ choice.id }}" value="{{ choice.text }}">
                            <div class="input-group-text">
                                <input type="radio" name="correct_{{ question.id }}" value="{{ choice.id }}" {% if choice.is_correct %}checked{% endif %}>
                                <label class="ms-1">Correta</label>
                            </div>
                        </div>
                    {% endfor %}
                </div>
            </div>
        {% endfor %}

        <button type="submit" class="btn btn-success">Salvar Alterações</button>
        <a href="{% url 'App_BRASFI:quizzes' %}" class="btn btn-secondary">Cancelar</a>
    </form>
</div>
{% endblock %}
